<section id='todos' class='<%= list_class(@list) %>'>
  <header>
    <h2><%= @list[:name] %></h2>
    <ul>
      <li>
        <form action='/lists/<%= @list_id %>/completed' method='post'>
          <input type='hidden' />
          <button type='submit' class='check'>Complete/Uncheck All</button>
        </form>
      </li>
      <li class='edit'><a href='/lists/<%= @list_id %>/edit'>Edit</a></li>
    </ul>
  </header>

  <% if @list[:todos].empty? %>
    <p>This list is empty</p>   
  <% else %>
    <ul>
      <% sort_todos(@list)[:todos].each_with_index do |todo, idx| %>
        <li<%= ' class=\'complete\'' if todo[:completed] %>>
          <form action='/lists/<%= @list_id %>/todos/<%= idx %>' method='post' class='check'>
            <input type='hidden' name='completed' value='<%= !todo[:completed] %>' />
            <button type='submit'>Complete</button>
          </form>

          <h3><%= todo[:name] %></h3>
            <form action='/lists/<%= @list_id %>/todos/<%= idx %>/delete' method="post" class="delete">
              <button type="submit">Delete</button>
            </form>
        </li>
      <% end %>
    </ul>
  <% end %>
</section>

<form action='/lists/<%= @list_id %>/todos' method='post'>
  <dl>
    <dt>
      <label for='todo'>Add item to the list:</label>
    </dt>
    <dd>
      <input name='todo' placeholder='Todo item' type='text' value=''>
    </dd>
  </dl>
  <fieldset class='actions'>
    <input type='submit' value='Add'>
    <a href='/'>Cancel</a>
  </fieldset>
</form>

<% content_for :header_link do %>
  <a class='list' href='/lists'>All Lists</a>
<% end %>
